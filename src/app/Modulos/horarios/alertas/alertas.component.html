
<app-menu></app-menu>
<section class="top  animate__animated animate__fadeIn ">
   <br><br>
    <div class="row">
        <div class="col">
            <button (click)="tabla(1,aler)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta1}" data-mdb-ripple-unbound="true"> Alerta sin validar
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary">{{aler}}</span>
           </button>
           &nbsp;
           <button (click)="tabla(2,aler2)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta2}" data-mdb-ripple-unbound="true"> Alerta de modificación
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-propio">{{aler2}}</span>
         </button>
         &nbsp;
         <button (click)="tabla(3,aler3)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta3}" data-mdb-ripple-unbound="true"> Alerta de informe de error
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning">{{aler3}}</span>
       </button>
       &nbsp;
       <button (click)="tabla(4,aler4)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta4}" data-mdb-ripple-unbound="true"> Alerta por vacaciones no disfrutadas
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-info">{{aler4}}</span>
     </button>
     &nbsp;
     <button (click)="tabla(5,aler5)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta5}" data-mdb-ripple-unbound="true"> Alerta de fichajes
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">{{aler5}}</span>
   </button>
   &nbsp;
   <button (click)="tabla(6,aler6)" type="button" class="btn btn-link position-relative" [ngClass]="{'active': alerta6}" data-mdb-ripple-unbound="true"> Alerta de solicitudes
    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">{{aler6}}</span>
 </button>


        </div>
        <div class="col-md-12">
            <br>
            <hr class="hrs">
            <div class="row container">
                <div class="col-md-3 " *ngIf="alerta1 && aler2 > 0">
                 <div class="input-group mb-3">
                     <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
                     <input autocomplete="off" name="busqueda" #val (keyup)="search1($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
                     aria-describedby="search-addon" />
                 </div>
             </div>
             <div class="col-md-2 " *ngIf="alerta1 && aler2 > 0">
                 <button mdbBtn type="button" class="btn btn-primary" mdbWavesEffect (click)="validarTodo(1)">Validar todo</button>
             </div>
         </div>
                    <table class="table datatable-table table-sm"
                    mdbTable
                    mdbTableSort
                    #table2="mdbTable"
                    #sort="mdbTableSort"
                    [dataSource]="data1"
                    [sort]="sort" *ngIf="alerta1">
                <thead class="grey lighten-1  text-white">
                    <tr>
                        <th width="90" [mdbTableSort]="data" class="cursor" sortBy="fechaTrabajo">Fecha
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>
                        <th width="100" [mdbTableSort]="data" class="cursor" sortBy="descripcionPuesto">Sección
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>

                        <th>Val.</th>
                        <th [mdbTableSort]="data" class="cursor" sortBy="apellidos">Empleado
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>
                        <th width="25" [mdbTableSort]="data" class="cursor" sortBy="turno_id">
                            Tur
                            <mdb-icon fas icon="sort"></mdb-icon>

                        </th>
                        <th width="30">Horario</th>

                        <th width="70">Justifi.</th>
                        <th width="85">Hora normal</th>
                        <th width="85">Hora aus.</th>
                        <th *ngFor="let head of horas" width="85" scope="col">{{head.descripcion}} </th>
                    </tr>
                </thead>
                <tbody>

                    <tr *ngFor="let item of data | dataFilter:filterQuery  ; let is = index">
                        <td>{{ item.fechaTrabajo | date: 'd-MM-yy'}}</td>
                        <td width="85" class="cursor" (dblclick)="func2(item.idPlantilla,'fp' , item.descripcionPuesto,item.nombre,item.apellidos, item.horario)">{{ item.descripcionPuesto}}</td>

                        <td width="20" class="text-center" (click)="validar(item )">
                            <i class="fas fa-save text-primary cursor fa-lg"></i>
                        </td>
                        <td class="cursor" width="110" (dblclick)="modalC('errores',item)">{{ item.apellidos }} {{ item.nombre}}</td>
                        <td class="cursor" (dblclick)="changeTurnoDia(item.idPlantilla, item.descripcionPuesto,item.nombre,item.apellidos, item.turnoDia ,'turChange')">{{ item.descripcion}}</td>
                        <td width="30" class="cursor text-primary" (dblclick)="changeTurno(item ,'fpHorario')">{{ item.horario }} </td>

                        <td class="text-center " width="70">
                            <!-- {{ item.normal}} -->
                            <!-- 
                            <select class="form-control" name="item.justificacion" (change)="justi($event,item.idPlantilla,item)" [(ngModel)]="item.justificacion">
                                <option [value]=" " > </option>
                                <option [value]="item.idJustificacion" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                            </select> -->
                            <input type="text" class="form-control" *ngIf="item.justificacion" disabled [(ngModel)]="item.justificacion">
                            <select *ngIf="!item.justificacion" class="form-control" name="justificacion" (change)="justiA($event,item.idPlantilla, item,'basicModal')" [(ngModel)]="item.justificacion">
                     
                                <option class="text-uppercase" [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                            </select>
                        </td>
                        <td class="text-center " width="70">
                            <!-- {{ item.normal}} -->
                            <input type="text"  class="form-control" #nNormal (change)="hNormal(nNormal,item.idPlantilla,is,item.horario)" [(ngModel)]="item.normal">
                        </td>
                        <td class="text-center " width="80">
                            <!-- {{ item.normal}} -->
                            <input type="text" class="form-control" #hA (change)="hAusentes(hA,item.idPlantilla,is,item.horario)" [(ngModel)]="item.horasAusentes">
                        </td>


                        <!-- <input width="70" [disabled]="!habilitarE" type="text" class="form-control" #datos (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, i.columna,item.idPlantilla,is) "> -->
                        <td *ngIf="hora1" class="td">
                            <input width="70" type="text" class="form-control" #datos name="uno" [(ngModel)]="item.hora1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora1',item.idPlantilla,is) ">
                        </td>
                        <td *ngIf="hora2" class="td">
                            <input width="70" type="text" class="form-control" #datos1 name="dos" [(ngModel)]="item.hora2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos1, 'hora2',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora3" class="td">
                            <input width="70" type="text" class="form-control" #datos name="tre" [(ngModel)]="item.hora3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora3',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora4" class="td">
                            <input width="70" type="text" class="form-control" #datos name="cuatro" [(ngModel)]="item.hora4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora4',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora5" class="td">
                            <input width="70" type="text" class="form-control" #datos name="cinco" [(ngModel)]="item.hora5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora5',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora6" class="td">
                            <input width="70" type="text" class="form-control" #datos6 name="seis" [(ngModel)]="item.hora6" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos6, 'hora6',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora7" class="td">
                            <input width="70" type="text" class="form-control" #datos name="siete" [(ngModel)]="item.hora7" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora7',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora8" class="td">
                            <input width="70" type="text" class="form-control" #datos name="ocho" [(ngModel)]="item.hora8" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora8',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora9" class="td">
                            <input width="70" type="text" class="form-control" #datos name="nueve" [(ngModel)]="item.hora9" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora9',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa1" class="td">

                            <input width="70" type="text" class="form-control" #bolsa1 name="bolsa11" [(ngModel)]="item.bolsa1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa1, 'bolsa1',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa2" class="td">
                            <input width="70" type="text" class="form-control" #bolsa2 name="bolsa22" [(ngModel)]="item.bolsa2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa2, 'bolsa2',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa3" class="td">
                            <input width="70" type="text" class="form-control" #bolsa3 name="bolsa33" [(ngModel)]="item.bolsa3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa3, 'bolsa3',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa4" class="td">
                            <input width="70" type="text" class="form-control" #bolsa4 name="bolsa44" [(ngModel)]="item.bolsa4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa4, 'bolsa4',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa5" class="td">
                            <input width="70" type="text" class="form-control" #bolsa5 name="bolsa55" [(ngModel)]="item.bolsa5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa5, 'bolsa5',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="plus1" class="td">
                            <input width="70" type="text" class="form-control " #plus1 name="plus11" [(ngModel)]="item.plus1" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus1, 'plus1',item.idPlantilla,$event) ">


                        </td>
                        <td *ngIf="plus2" class="td">
                            <input width="70" type="text" class="form-control " #plus2 name="plus22" [(ngModel)]="item.plus2" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus2, 'plus2',item.idPlantilla,$event) ">

                        </td>
                        <td *ngIf="plus3" class="td">
                            <input width="70" type="text" class="form-control " #plus3 name="plus33" [(ngModel)]="item.plus3" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus3, 'plus3',item.idPlantilla,$event) ">

                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4">
                            <sv-bootstrap-paginator [rowsOnPageSet]="[5, 10, 25]"></sv-bootstrap-paginator>
                        </td>
                    </tr>
                </tfoot>
            </table>
           <div class="row container">
               <div class="col-md-3 " *ngIf="alerta3 && aler2 > 0">
                <div class="input-group mb-3">
                    <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
                    <input autocomplete="off" name="busqueda" #val (keyup)="search1($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
                    aria-describedby="search-addon" />
                </div>
            </div>
            <div class="col-md-2 " *ngIf="alerta3 && aler2 > 0">
                <button mdbBtn type="button" class="btn btn-primary" mdbWavesEffect (click)="validarTodo(3)">Validar todo</button>
            </div>
        </div>
            <!--  alerta 3 -->
    
                <mdb-accordion [borderless]="true" *ngIf="alerta3"  >
                    <mdb-accordion-item *ngFor="let i of data2 | dataFilter:filterQuery" (itemHidden)="onFirstItemShow(i.idAlertaI)">
                        <ng-template mdbAccordionItemHeader >
                            <table class="table table-sm" (click)="vistoInfo(i)"  
                             mdbTable
                            mdbTableSort
                            #table2="mdbTable"
                            >
                                <thead class="grey lighten-1">
                                    <tr>
                                        <th width="100">Fecha</th>
                                        <th>N. Empleado</th>
                                        <th>Operario</th>
                                        <th>Observación</th>
                                        <th>Fecha</th>
                                        <th>Detalle</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr [ngClass]="{'bg-propio1' : isN == i.idAlertaI}">
                                        <th [ngClass]="{'text-white' : isN == i.idAlertaI}">{{ i.fechaAlertaI | date: 'd-MM-yyyy'}}</th>
                                        <th [ngClass]="{'text-white' : isN == i.idAlertaI}">{{ i.nEmpleado}}</th>
                                        <th [ngClass]="{'text-white' : isN == i.idAlertaI}">{{ i.apellidos}} {{ i.nombre}}</th>
                                        <th [ngClass]="{'text-white' : isN == i.idAlertaI}">{{ i.observacion}}</th>
                                        <th [ngClass]="{'text-white' : isN == i.idAlertaI}">{{ i.fechaAlertaI | date: 'fullDate'}}</th>
                                        <th [collapsed]="true" class="text-primary fa-lg">
                                            <i class="fas fa-arrow-circle-down"></i>
                                        </th>
                                    </tr>
                                    
                                </tbody>
                            </table>
                        </ng-template>
                    
    
                        <ng-template mdbAccordionItemBody>
    
                            <table mdbTable *ngIf="verDetalle">
                                <thead>
                                    <tr>
                                        <th width="90">Fecha</th>
                                        <th width="110">Sección</th>
                                        <!-- <th>Validar</th> -->
                                        <th>Empleado</th>
                                        <th width="10">Tur</th>
                                        <th width="30">Horario</th>
                                        <th width="70">Justifi.</th>
                                        <th width="85">Hora normal</th>
                                        <th width="85">Hora aus.</th>
                                        <th *ngFor="let head of horas" width="85" scope="col">{{head.descripcion}} </th>
                                    </tr>
                                </thead>
    
                                <tbody>
                                    <tr *ngFor="let item of datosData ; let is = index">
                                        <td>{{ item.fechaTrabajo | date: 'd-M-yyyy'}}</td>
                                        <td width="110" class="cursor" (click)="func2(item.idPlantilla,'fp' , item.descripcionPuesto,item.nombre,item.apellidos, item.horario)">{{ item.descripcionPuesto}}</td>
    
    
                                        <td width="110" class="cursor" (dblclick)="modalC('errores',item)">{{ item.apellidos }} {{ item.nombre}}</td>
                                        <td width="32" class="cursor" (dblclick)="changeTurnoDia(item.idPlantilla, item.descripcionPuesto,item.nombre,item.apellidos, item.turnoDia ,'turChange')">{{ item.descripcion}}</td>
                                        <td width="30" class="cursor text-primary" (dblclick)="changeTurno(item ,'fpHorario')">{{ item.horario }} </td>
    
                                        <td class="text-center " width="70">
                                            <!-- {{ item.normal}} -->
                                            <input type="text" class="form-control" *ngIf="item.justificacion" disabled [(ngModel)]="item.justificacion">
                                            <select *ngIf="!item.justificacion" class="form-select" name="justificacion" (change)="justiA($event,item.idPlantilla, item,'basicModal')" [(ngModel)]="item.justificacion">
                                     
                                                <option class="text-uppercase" [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                                            </select>
                                        </td>
                                        <td class="text-center " width="70">
                                            <!-- {{ item.normal}} -->
                                            <input type="number"  class="form-control" #nNormal (change)="hNormal(nNormal,item.idPlantilla,is,item.horario)" [(ngModel)]="item.normal">
                                        </td>
                                        <td class="text-center " width="80">
                                            <!-- {{ item.normal}} -->
                                            <input type="number" class="form-control" #hA (change)="hAusentes(hA,item.idPlantilla,is,item.horario)" [(ngModel)]="item.horasAusentes">
                                        </td>
    
                                        <!-- Input -->
    
    
                                        <!-- <input width="70" [disabled]="!habilitarE" type="text" class="form-control" #datos (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, i.columna,item.idPlantilla,is) "> -->
                                        <td *ngIf="hora1" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="uno" [(ngModel)]="item.hora1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora1',item.idPlantilla,is) ">
                                        </td>
                                        <td *ngIf="hora2" class="td">
                                            <input width="70" type="text" class="form-control" #datos1 name="dos" [(ngModel)]="item.hora2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos1, 'hora2',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora3" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="tre" [(ngModel)]="item.hora3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora3',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora4" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="cuatro" [(ngModel)]="item.hora4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora4',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora5" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="cinco" [(ngModel)]="item.hora5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora5',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora6" class="td">
                                            <input width="70" type="text" class="form-control" #datos6 name="seis" [(ngModel)]="item.hora6" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos6, 'hora6',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora7" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="siete" [(ngModel)]="item.hora7" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora7',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora8" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="ocho" [(ngModel)]="item.hora8" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora8',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="hora9" class="td">
                                            <input width="70" type="text" class="form-control" #datos name="nueve" [(ngModel)]="item.hora9" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora9',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="bolsa1" class="td">
    
                                            <input width="70" type="text" class="form-control" #bolsa1 name="bolsa11" [(ngModel)]="item.bolsa1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa1, 'bolsa1',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="bolsa2" class="td">
                                            <input width="70" type="text" class="form-control" #bolsa2 name="bolsa22" [(ngModel)]="item.bolsa2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa2, 'bolsa2',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="bolsa3" class="td">
                                            <input width="70" type="text" class="form-control" #bolsa3 name="bolsa33" [(ngModel)]="item.bolsa3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa3, 'bolsa3',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="bolsa4" class="td">
                                            <input width="70" type="text" class="form-control" #bolsa4 name="bolsa44" [(ngModel)]="item.bolsa4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa4, 'bolsa4',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="bolsa5" class="td">
                                            <input width="70" type="text" class="form-control" #bolsa5 name="bolsa55" [(ngModel)]="item.bolsa5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa5, 'bolsa5',item.idPlantilla,is) ">
    
                                        </td>
                                        <td *ngIf="plus1 " class="td">
                                            <input width="70" type="text" class="form-control " #plus1 name="plus11" [(ngModel)]="item.plus1" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus1, 'plus1',item.idPlantilla,$event) ">
    
    
                                        </td>
                                        <td *ngIf="plus2 " class="td">
                                            <input width="70" type="text" class="form-control " #plus2 name="plus22" [(ngModel)]="item.plus2" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus2, 'plus2',item.idPlantilla,$event) ">
    
                                        </td>
                                        <td *ngIf="plus3 " class="td">
                                            <input width="70" type="text" class="form-control " #plus3 name="plus33" [(ngModel)]="item.plus3" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus3, 'plus3',item.idPlantilla,$event) ">
    
                                        </td>
    
    
    
                                    </tr>
    
                                    <tr>
                                        <td>Validar</td>
                                        <td width="60" class="text-center cursor q text-primary" (click)="validarInfo(i , 'panel')">
                                            <i class="fas fa-save fa-lg "></i>
    
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </ng-template>
                    </mdb-accordion-item>
                </mdb-accordion>
                <!-- Alerta de modificación -->
                <div class="row container">
                    <div class="col-md-3 " *ngIf="alerta2 && aler2 > 0">
                        <div class="input-group mb-3">
                            <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
                            <input autocomplete="off" (keyup)="search1($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
                            aria-describedby="search-addon" />
                        </div>
                    </div>
                    <div class="col-md-2 " *ngIf="alerta2 && aler2 > 0">
                        <button mdbBtn type="button" class="btn btn-primary" mdbWavesEffect (click)="validarTodo(2)">Validar todo</button>
                    </div>
               </div>
            
                    <table class="table datatable-table table-sm"
                    mdbTable
                    mdbTableSort
                    #table2="mdbTable"
                    #sort="mdbTableSort"
                    [dataSource]="data1"
                    [sort]="sort" *ngIf="alerta2">
                <thead class="grey lighten-1  text-white">
                    <tr>
                        <th width="95" [mdbTableSort]="data" class="cursor" sortBy="fechaTrabajo">Fecha
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>
                        <th width="95" [mdbTableSort]="data" class="cursor" sortBy="descripcionPuesto">Sección
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>

                        <th>Val</th>
                        <th [mdbTableSort]="data" class="cursor" sortBy="apellidos">Empleado
                            <mdb-icon fas icon="sort"></mdb-icon>
                        </th>
                        <th width="20" [mdbTableSort]="data" class="cursor" sortBy="turno_id">
                            Tur
                            <mdb-icon fas icon="sort"></mdb-icon>

                        </th>
                        <th width="30">Horario</th>
                        <th width="70">Justifi.</th>
                        <th width="92">Hora normal</th>
                        <th width="92">Hora aus.</th>
                        <th *ngFor="let head of horas" width="85" scope="col">{{head.descripcion}} </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of table2.data  ; let is = index">
                        <td>{{ item.fechaTrabajo | date: 'd-MM-yy'}}</td>
                        <td [ngClass]="{'text-danger': item.puesto_id != item.puesto}" width="110" class="cursor" (dblclick)="func2(item.idPlantilla,'fp' , item.descripcionPuesto,item.nombre,item.apellidos, item.horario)">{{ item.descripcionPuesto}}</td>

                        <td width="20" class="text-center  cursor" (click)="validar(item )">
                            <i class="fas fa-save fa-lg text-primary"></i>
                        </td>
                        <td width="110" class="cursor" (dblclick)="modalC('errores',item)">{{ item.apellidos }} {{ item.nombre}}</td>
                        <td width="20"><span [ngClass]="{'text-danger h5': item.turno_id != item.turno_dia}" class="cursor" (dblclick)="changeTurnoDia(item.idPlantilla, item.descripcionPuesto,item.nombre,item.apellidos, item.turnoDia ,'turChange')"> {{ item.descripcion}}</span> </td>
                        <td width="30" class="cursor text-primary" (dblclick)="changeTurno(item ,'fpHorario')">{{ item.horario }} </td>

                        <td class="text-center " width="70">
                            <input type="text" class="form-control" *ngIf="item.justificacion" disabled [(ngModel)]="item.justificacion">
                            <select *ngIf="!item.justificacion" class="form-select" name="justificacion" (change)="justiA($event,item.idPlantilla, item,'basicModal')" [(ngModel)]="item.justificacion">
                                <option class="text-uppercase" [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                            </select>
                        </td>
                        <td class="text-center " width="80">
                            <!-- {{ item.normal}} -->
                            <input width="80" [ngClass]="{'input': item.normal != item.horaDias}" type="number"  class="form-control" #nNormal (change)="hNormal(nNormal,item.idPlantilla,is,item.horario)" [(ngModel)]="item.normal">
                        </td>
                        <td class="text-center " width="80">
                            <!-- {{ item.normal}} -->
                            <input type="number" [ngClass]="{'input': item.horasAusentes > 0}" class="form-control" #hA (change)="hAusentes(hA,item.idPlantilla,is,item.horario)" [(ngModel)]="item.horasAusentes">
                        </td>

                        <!-- Input -->


                        <!-- <input width="70" [disabled]="!habilitarE" type="text" class="form-control" #datos (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, i.columna,item.idPlantilla,is) "> -->
                        <td *ngIf="hora1" class="td">
                            <input [ngClass]="{'input': item.hora1 != null}" type="text" class="form-control" #datos name="uno" [(ngModel)]="item.hora1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora1',item.idPlantilla,is) ">
                        </td>
                        <td *ngIf="hora2" class="td">
                            <input [ngClass]="{'input': item.hora2 != null}" type="text" class="form-control" #datos1 name="dos" [(ngModel)]="item.hora2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos1, 'hora2',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora3" class="td">
                            <input [ngClass]="{'input': item.hora3 != null}" type="text" class="form-control" #datos name="tre" [(ngModel)]="item.hora3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora3',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora4" class="td">
                            <input [ngClass]="{'input': item.hora4 != null}" type="text" class="form-control" #datos name="cuatro" [(ngModel)]="item.hora4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora4',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora5" class="td">
                            <input [ngClass]="{'input': item.hora5 != null}" type="text" class="form-control" #datos name="cinco" [(ngModel)]="item.hora5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora5',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora6" class="td">
                            <input [ngClass]="{'input': item.hora6 != null}" type="text" class="form-control" #datos6 name="seis" [(ngModel)]="item.hora6" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos6, 'hora6',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora7" class="td">
                            <input [ngClass]="{'input': item.hora7 != null}" type="text" class="form-control" #datos name="siete" [(ngModel)]="item.hora7" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora7',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora8" class="td">
                            <input [ngClass]="{'input': item.hora8 != null}" type="text" class="form-control" #datos name="ocho" [(ngModel)]="item.hora8" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora8',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="hora9" class="td">
                            <input [ngClass]="{'input': item.hora9 != null}" type="text" class="form-control" #datos name="nueve" [(ngModel)]="item.hora9" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora9',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa1" class="td">

                            <input [ngClass]="{'input': item.bolsa1 != null}" type="text" class="form-control" #bolsa1 name="bolsa11" [(ngModel)]="item.bolsa1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa1, 'bolsa1',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa2" class="td">
                            <input [ngClass]="{'input': item.bolsa2 != null}" type="text" class="form-control" #bolsa2 name="bolsa22" [(ngModel)]="item.bolsa2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa2, 'bolsa2',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa3" class="td">
                            <input [ngClass]="{'input': item.bolsa3 != null}" type="text" class="form-control" #bolsa3 name="bolsa33" [(ngModel)]="item.bolsa3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa3, 'bolsa3',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa4" class="td">
                            <input [ngClass]="{'input': item.bolsa4 != null}" type="text" class="form-control" #bolsa4 name="bolsa44" [(ngModel)]="item.bolsa4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa4, 'bolsa4',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="bolsa5" class="td">
                            <input [ngClass]="{'input': item.bolsa5 != null}" type="text" class="form-control" #bolsa5 name="bolsa55" [(ngModel)]="item.bolsa5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa5, 'bolsa5',item.idPlantilla,is) ">

                        </td>
                        <td *ngIf="plus1 " class="td">
                            <input [ngClass]="{'input': item.bocadillo != item.plus1 && item.bocadillo != 'N'}" type="text" class="form-control " #plus1 name="plus11" [(ngModel)]="item.plus1" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus1, 'plus1',item.idPlantilla,$event) ">


                        </td>
                        <td *ngIf="plus2 " class="td">
                            <input [ngClass]="{'input':  item.plus2 != null}" type="text" class="form-control " #plus2 name="plus22" [(ngModel)]="item.plus2" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus2, 'plus2',item.idPlantilla,$event) ">

                        </td>

                        <td *ngIf="plus3 " class="td">
                            <input [ngClass]="{'input': item.horario != 'N' && item.plus3 != null, 'input1': item.horario == 'N' && item.plus3 == null }" width="70" type="text" class="form-control " #plus3 name="plus33" [(ngModel)]="item.plus3" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus3, 'plus3',item.idPlantilla,$event) ">

                        </td>

                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4">
                            <sv-bootstrap-paginator [rowsOnPageSet]="[5, 10, 25]"></sv-bootstrap-paginator>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>


    <!-- alerta 4 -->

    <div class="row container" *ngIf="alerta4 && aler4 > 0">
        <div class="col-md-3 ">
         <div class="input-group mb-3">
             <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
             <input autocomplete="off" name="busqueda" #val (keyup)="search1($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
             aria-describedby="search-addon" />
         </div>
     </div>
     
  </div>
  <table class="table datatable-table table-sm"
  mdbTable
  mdbTableSort
  #table2="mdbTable"
  #sort="mdbTableSort"
  [dataSource]="data1"
  [sort]="sort" *ngIf="alerta4">
<thead class="grey lighten-1  text-white">
            <tr>
                <th width="90" [mdbTableSort]="data" class="cursor" sortBy="fechaTrabajo">Fecha
                    <mdb-icon fas icon="sort"></mdb-icon>
                </th>
                <th width="100" [mdbTableSort]="data" class="cursor" sortBy="descripcionPuesto">Sección
                    <mdb-icon fas icon="sort"></mdb-icon>
                </th>

                <th>Val.</th>
                <th [mdbTableSort]="data" class="cursor" sortBy="apellidos">Empleado
                    <mdb-icon fas icon="sort"></mdb-icon>
                </th>
                <th width="25" [mdbTableSort]="data" class="cursor" sortBy="turno_id">
                    Tur
                    <mdb-icon fas icon="sort"></mdb-icon>

                </th>
                <th width="30">Horario</th>

                <th width="70">Justifi.</th>
                <th width="85">Hora normal</th>
                <th width="85">Hora aus.</th>
                <th *ngFor="let head of horas" width="85" scope="col">{{head.descripcion}} </th>
            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let item of da4 | dataFilter:filterQuery  ; let is = index">
                <td>{{ item.fechaTrabajo | date: 'd-MM-yy'}}</td>
                <td width="85" class="cursor" (dblclick)="func2(item.idPlantilla,'fp' , item.descripcionPuesto,item.nombre,item.apellidos, item.horario)">{{ item.descripcionPuesto}}</td>

                <td width="20" class="text-center" (click)="validar(item )">
                    <i class="fas fa-save text-primary cursor fa-lg"></i>
                </td>
                <td class="cursor" width="110" (dblclick)="modalC('errores',item)">{{ item.apellidos }} {{ item.nombre}}</td>
                <td class="cursor" (dblclick)="changeTurnoDia(item.idPlantilla, item.descripcionPuesto,item.nombre,item.apellidos, item.turnoDia ,'turChange')">{{ item.turno_dia}}</td>
                <td width="30" class="cursor text-primary" (dblclick)="changeTurno(item ,'fpHorario')">{{ item.horario }} </td>

                <td class="text-center " width="70">
                    <!-- {{ item.normal}} -->
                    <!-- 
                    <select class="form-control" name="item.justificacion" (change)="justi($event,item.idPlantilla,item)" [(ngModel)]="item.justificacion">
                        <option [value]=" " > </option>
                        <option [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                    </select> -->
                    <input type="text" class="form-control" *ngIf="item.justificacion" disabled [(ngModel)]="item.justificacion">
                    <select *ngIf="!item.justificacion" class="form-select" name="justificacion" (change)="justiA($event,item.idPlantilla, item,'basicModal')" [(ngModel)]="item.justificacion">
             
                        <option class="text-uppercase" [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                    </select>
                </td>
                <td class="text-center " width="70">
                    <!-- {{ item.normal}} -->
                    <input type="text"  class="form-control" #nNormal (change)="hNormal(nNormal,item.idPlantilla,is,item.horario)" [(ngModel)]="item.normal">
                </td>
                <td class="text-center " width="80">
                    <!-- {{ item.normal}} -->
                    <input type="text" class="form-control" #hA (change)="hAusentes(hA,item.idPlantilla,is,item.horario)" [(ngModel)]="item.horasAusentes">
                </td>


                <!-- <input width="70" [disabled]="!habilitarE" type="text" class="form-control" #datos (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, i.columna,item.idPlantilla,is) "> -->
                <td *ngIf="hora1" class="td">
                    <input width="70" type="text" class="form-control" #datos name="uno" [(ngModel)]="item.hora1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora1',item.idPlantilla,is) ">
                </td>
                <td *ngIf="hora2" class="td">
                    <input width="70" type="text" class="form-control" #datos1 name="dos" [(ngModel)]="item.hora2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos1, 'hora2',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora3" class="td">
                    <input width="70" type="text" class="form-control" #datos name="tre" [(ngModel)]="item.hora3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora3',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora4" class="td">
                    <input width="70" type="text" class="form-control" #datos name="cuatro" [(ngModel)]="item.hora4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora4',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora5" class="td">
                    <input width="70" type="text" class="form-control" #datos name="cinco" [(ngModel)]="item.hora5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora5',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora6" class="td">
                    <input width="70" type="text" class="form-control" #datos6 name="seis" [(ngModel)]="item.hora6" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos6, 'hora6',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora7" class="td">
                    <input width="70" type="text" class="form-control" #datos name="siete" [(ngModel)]="item.hora7" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora7',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora8" class="td">
                    <input width="70" type="text" class="form-control" #datos name="ocho" [(ngModel)]="item.hora8" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora8',item.idPlantilla,is) ">

                </td>
                <td *ngIf="hora9" class="td">
                    <input width="70" type="text" class="form-control" #datos name="nueve" [(ngModel)]="item.hora9" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora9',item.idPlantilla,is) ">

                </td>
                <td *ngIf="bolsa1" class="td">

                    <input width="70" type="text" class="form-control" #bolsa1 name="bolsa11" [(ngModel)]="item.bolsa1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa1, 'bolsa1',item.idPlantilla,is) ">

                </td>
                <td *ngIf="bolsa2" class="td">
                    <input width="70" type="text" class="form-control" #bolsa2 name="bolsa22" [(ngModel)]="item.bolsa2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa2, 'bolsa2',item.idPlantilla,is) ">

                </td>
                <td *ngIf="bolsa3" class="td">
                    <input width="70" type="text" class="form-control" #bolsa3 name="bolsa33" [(ngModel)]="item.bolsa3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa3, 'bolsa3',item.idPlantilla,is) ">

                </td>
                <td *ngIf="bolsa4" class="td">
                    <input width="70" type="text" class="form-control" #bolsa4 name="bolsa44" [(ngModel)]="item.bolsa4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa4, 'bolsa4',item.idPlantilla,is) ">

                </td>
                <td *ngIf="bolsa5" class="td">
                    <input width="70" type="text" class="form-control" #bolsa5 name="bolsa55" [(ngModel)]="item.bolsa5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa5, 'bolsa5',item.idPlantilla,is) ">

                </td>
                <td *ngIf="plus1" class="td">
                    <input width="70" type="text" class="form-control " #plus1 name="plus11" [(ngModel)]="item.plus1" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus1, 'plus1',item.idPlantilla,$event) ">


                </td>
                <td *ngIf="plus2" class="td">
                    <input width="70" type="text" class="form-control " #plus2 name="plus22" [(ngModel)]="item.plus2" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus2, 'plus2',item.idPlantilla,$event) ">

                </td>
                <td *ngIf="plus3" class="td">
                    <input width="70" type="text" class="form-control " #plus3 name="plus33" [(ngModel)]="item.plus3" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus3, 'plus3',item.idPlantilla,$event) ">

                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4">
                    <sv-bootstrap-paginator [rowsOnPageSet]="[5, 10, 25]"></sv-bootstrap-paginator>
                </td>
            </tr>
        </tfoot>
    </table>



    <!--  alerta 5 -->
    <div *ngIf="alerta5">
        <div class="row container">
            <div class="col-md-3 ">
             <div class="input-group mb-3">
                 <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
                 <input autocomplete="off" name="busqueda" #val (keyup)="search1($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
                 aria-describedby="search-addon" />
             </div>
         </div>
         <div class="col-md-2 ">
             <button mdbBtn type="button" class="btn btn-primary" mdbWavesEffect (click)="validarFichaTodo()">Validar todo</button>
         </div>
         </div>

        <br>
        <div *ngFor="let i of data4 | dataFilter:filterQuery; let j = index ">

            <table class="table datatable-table table-sm"
                    mdbTable
                    mdbTableSort
                    #table2="mdbTable"
                    #sort="mdbTableSort"
                    [dataSource]="data1"
                    [sort]="sort" >
                    <thead class="grey lighten-1  text-white">
                        <tr>
                            <th width="100">Fecha</th>
                            <th>N. Empleado</th>
                            <th width="200">Operario</th>
                            <th>Hora normal</th>
                            <th>Fichaje</th>
                            <th>Diferencia</th>
                            <th width="300">Comentario</th>
                            <th>Validar</th>
                            <th *ngIf="!panelRow && j != indice" class="cursor animated fadeIn green-text pr-3" (click)="vistoInfo5(i,j)">
                                <i class="fas fa-long-arrow-alt-down fa-lg"></i>
                            </th>
                            <th *ngIf="panelRow && j == indice" class="cursor animated fadeIn red-text pr-3" (click)="cerrarPanel()">
                                <i class="fas fa-long-arrow-alt-up fa-lg"></i>
                            </th>
                            <th *ngIf="panelRow && j != indice" class="cursor animated fadeIn text-white">
                                <i class="fas fa-exclamation-triangle"></i>
                            </th>
                        </tr>
                        </thead>
                <tbody>
                    <tr>
                        <td>{{ i.fechaTrabajoF | date: 'd-MM-yyyy'}}</td>
                        <td>{{ i.nEmpleado}}</td>
                        <td>{{ i.apellidos}} {{ i.nombre}}</td>
                        <td>{{ i.horarioTrabajado}}</td>
                        <td>{{ i.horarioFichaje}}</td>
                        <td [ngClass]="{'text-success' : i.horarioFichaje - i.horarioTrabajado > 0, 'text-danger' : i.horarioFichaje - i.horarioTrabajado < 0 }">
                            {{ i.horarioFichaje - i.horarioTrabajado | number: '1.2-2'}}</td>
                        <td> {{i.comentarioF}} </td>

                        <td class="cursor" (click)="validarFicha(i)">
                            <a class="cta">
                                <span>Validar</span>
                                <svg width="13px" height="10px" viewBox="0 0 13 10">
                                  <path d="M1,5 L11,5"></path>
                                  <polyline points="8 1 12 5 8 9"></polyline>
                                </svg>
                            </a>
                        </td>

                    </tr>

                </tbody>
            </table>
            <!-- panel a mostrar -->
            <div class="" *ngIf="verDetalle && j == indice">
                <div class="col-md-3 top">
                    <textarea *ngIf="inputView && j == indice" mdbInput type="text" #coF (change)="addComentarioF(coF,i.idAlertaFichaje)" class="md-textarea form-control" name="comentarioF" [(ngModel)]="comentarioF"></textarea>
                    <mdb-icon *ngIf="inputView && j == indice" (click)="cerrar()" class="field-icon text-danger cursor" fas icon="times"></mdb-icon>
                    <select *ngIf="!inputView" name="" class="form-select" (change)="changeComantario($event,i.idAlertaFichaje ,j)">
                            <option selected>Seleccione comentario</option>
                            <option class="text-capitalize" [value]="item.tituloF" *ngFor="let item of todoTitulos1">{{item.tituloF}}</option>
                            <option value="0" >Comentario Propio </option>
                    </select>

                </div>
                <hr class="bg-warning">
                <table mdbTable class="animated fadeInUp bg-propio2">
                    <thead>
                        <tr>
                            <th width="90">Fecha</th>
                            <th width="110">Sección</th>
                            <!-- <th>Validar</th> -->
                            <th>Empleado</th>
                            <th width="10">Tur</th>
                            <th width="30">Horario</th>
                            <th width="70">Justifi.</th>
                            <th width="85">Hora normal</th>
                            <th width="85">Hora aus.</th>
                            <th *ngFor="let head of horas" width="85" scope="col">{{head.descripcion}} </th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let item of datosData ; let is = index">

                            <td>{{ item.fechaTrabajo | date: 'd-M-yyyy'}}</td>
                            <td width="110" class="cursor" (click)="func2(item.idPlantilla,'fp' , item.descripcionPuesto,item.nombre,item.apellidos, item.horario)">{{ item.descripcionPuesto}}</td>


                            <td width="110" class="cursor" (dblclick)="modalC('errores',item)">{{ item.apellidos }} {{ item.nombre}}</td>
                            <td width="32" class="cursor" (dblclick)="changeTurnoDia(item.idPlantilla, item.descripcionPuesto,item.nombre,item.apellidos, item.turnoDia ,'turChange')">{{ item.descripcion}}</td>
                            <td width="30" class="cursor text-primary" (dblclick)="changeTurno(item ,'fpHorario')">{{ item.horario }} </td>

                            <td class="text-center " width="70">
                                <!-- {{ item.normal}} -->
                                <input type="text" class="form-control" *ngIf="item.justificacion" disabled [(ngModel)]="item.justificacion">
                                <select *ngIf="!item.justificacion" class="form-select" name="justificacion" (change)="justiA($event,item.idPlantilla, item,'basicModal')" [(ngModel)]="item.justificacion">
                         
                                    <option class="text-uppercase" [value]="item.idJusti" *ngFor="let item of justifi"> {{item.detallesJ}}</option>
                                </select>
                            </td>
                            <td class="text-center " width="70">
                                <!-- {{ item.normal}} -->
                                <input type="text"  class="form-control" #nNormal (change)="hNormal(nNormal,item.idPlantilla,is,item.horario)" [(ngModel)]="item.normal">
                            </td>
                            <td class="text-center " width="80">
                                <!-- {{ item.normal}} -->
                                <input type="text" class="form-control" #hA (change)="hAusentes(hA,item.idPlantilla,is,item.horario)" [(ngModel)]="item.horasAusentes">
                            </td>

                            <!-- Input -->


                            <!-- <input width="70" [disabled]="!habilitarE" type="text" class="form-control" #datos (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, i.columna,item.idPlantilla,is) "> -->
                            <td *ngIf="hora1" class="td">
                                <input width="70" type="text" class="form-control" #datos name="uno" [(ngModel)]="item.hora1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora1',item.idPlantilla,is) ">
                            </td>
                            <td *ngIf="hora2" class="td">
                                <input width="70" type="text" class="form-control" #datos1 name="dos" [(ngModel)]="item.hora2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos1, 'hora2',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora3" class="td">
                                <input width="70" type="text" class="form-control" #datos name="tre" [(ngModel)]="item.hora3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora3',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora4" class="td">
                                <input width="70" type="text" class="form-control" #datos name="cuatro" [(ngModel)]="item.hora4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora4',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora5" class="td">
                                <input width="70" type="text" class="form-control" #datos name="cinco" [(ngModel)]="item.hora5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora5',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora6" class="td">
                                <input width="70" type="text" class="form-control" #datos6 name="seis" [(ngModel)]="item.hora6" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos6, 'hora6',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora7" class="td">
                                <input width="70" type="text" class="form-control" #datos name="siete" [(ngModel)]="item.hora7" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora7',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora8" class="td">
                                <input width="70" type="text" class="form-control" #datos name="ocho" [(ngModel)]="item.hora8" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora8',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="hora9" class="td">
                                <input width="70" type="text" class="form-control" #datos name="nueve" [(ngModel)]="item.hora9" (change)="onClick(item.fechaTrabajo , item.nEmpleado , datos, 'hora9',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="bolsa1" class="td">

                                <input width="70" type="text" class="form-control" #bolsa1 name="bolsa11" [(ngModel)]="item.bolsa1" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa1, 'bolsa1',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="bolsa2" class="td">
                                <input width="70" type="text" class="form-control" #bolsa2 name="bolsa22" [(ngModel)]="item.bolsa2" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa2, 'bolsa2',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="bolsa3" class="td">
                                <input width="70" type="text" class="form-control" #bolsa3 name="bolsa33" [(ngModel)]="item.bolsa3" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa3, 'bolsa3',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="bolsa4" class="td">
                                <input width="70" type="text" class="form-control" #bolsa4 name="bolsa44" [(ngModel)]="item.bolsa4" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa4, 'bolsa4',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="bolsa5" class="td">
                                <input width="70" type="text" class="form-control" #bolsa5 name="bolsa55" [(ngModel)]="item.bolsa5" (change)="onClick(item.fechaTrabajo , item.nEmpleado , bolsa5, 'bolsa5',item.idPlantilla,is) ">

                            </td>
                            <td *ngIf="plus1 " class="td">
                                <input width="70" type="text" class="form-control " #plus1 name="plus11" [(ngModel)]="item.plus1" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus1, 'plus1',item.idPlantilla,$event) ">


                            </td>
                            <td *ngIf="plus2 " class="td">
                                <input width="70" type="text" class="form-control " #plus2 name="plus22" [(ngModel)]="item.plus2" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus2, 'plus2',item.idPlantilla,$event) ">

                            </td>
                            <td *ngIf="plus3 " class="td">
                                <input width="70" type="text" class="form-control " #plus3 name="plus33" [(ngModel)]="item.plus3" (blur)="onClick(item.fechaTrabajo , item.nEmpleado , plus3, 'plus3',item.idPlantilla,$event) ">

                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!--  alerta 6 -->
    <div *ngIf="alerta6">
        <div class="row container">
            <div class="col-md-4 " *ngIf="alerta6 && aler6 > 0">
                <!-- Default input -->
                <div class="input-group mb-4">
                    <span class="input-group-text " id="search-addon"><i class="fas fa-search"></i></span>
                    <input autocomplete="off" (keyup)="search($event)" [(ngModel)]="filterQuery" type="search" class="form-control rounded" placeholder="Buscar empleado" aria-label="Search"
                      aria-describedby="search-addon" />
                      <span class="mar" [ngClass]="{'text-danger': cre < 200 , 'text-primary': cre > 200}"><i class="fas fa-sms" ></i>&nbsp; {{ cre}} SMS </span>  
                  </div>
            </div>

        </div>
      
        <table class="table datatable-table table-sm"
            mdbTable
            mdbTableSort
            #table="mdbTable"
            #sort="mdbTableSort"
            [dataSource]="data5"
            [sort]="sort"
            [pagination]="paginations">
        <thead class="grey lighten-1  text-white">
            <tr>
                <th>Empleado</th>
                <th>Tipo de solicitud</th>
                <th>Inicio</th>
                <th>Final</th>
                <th width="200">Estado</th>
                <th>Comentario</th>
                <th>C. horario</th>
                <th>Denegar</th>
            </tr>
            </thead>
            <tbody *ngIf="!loadingTabla6">
                <tr *ngFor="let item of table.data">
                    <td class="text-capitalize">{{ item.nombre}}</td>
                    <td class="text-capitalize">{{ item.evento}}</td>
                    <td class="text-capitalize">{{ item.fecha_inicio | date: 'EEEE, d MMMM, y'}}</td>
                    <td class="text-capitalize">{{ item.fecha_fin | date: 'EEEE, d MMMM, y'}}</td>
                    <td *ngIf="item.estado == 1">
                        <span class="alerta alert-primary">En proceso </span>
                    </td>
                    <td *ngIf="item.estado < 1">
                        <span class="alerta alert-danger">Petición de borrado </span>
                    </td>
                    <td class="text-primary" *ngIf="item.comentario">{{ item.comentario }}</td>
                    <td *ngIf="!item.comentario">-------</td>
                    <td class="cursor  q text-center text-primary" (click)="cHorario(item,chorario)">
                        <i class="fas fa-street-view fa-lg"></i>
                    </td>
                    <td class="cursor q text-center text-danger" (click)="denegar(item)">
                        <i class="fas fa-trash-alt fa-lg"></i>
                    </td>
                </tr>

                <tfoot>
                    <tr>
                        <td colspan="5">
                            <mdb-table-pagination rowsPerPageText="Lineas por página" ofText="De" #paginations></mdb-table-pagination>
                        </td>
                    </tr>
                </tfoot>
        </table>
        <ng-container *ngIf="loadingTabla6">
            <div class="datatable-loader bg-light">
              <span class="datatable-loader-inner">
                <span class="datatable-progress bg-primary"></span>
              </span>
            </div>
            <p class="text-center text-muted my-4">Cargando resultados...</p>
          </ng-container>

    </div>



</section>
